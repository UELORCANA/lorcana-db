<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TCG カードDB（非公式）</title>

<style>
body{
  font-family: system-ui, sans-serif;
  background:#f5f5f5;
  margin:0;
  padding:12px;
}

h1{
  text-align:center;
  font-size:1.4rem;
}

.disclaimer{
  font-size:0.75rem;
  background:#fff;
  padding:8px;
  border-radius:6px;
  margin-bottom:12px;
}

.search-box{
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-bottom:16px;
}

.filter-group{
  margin-bottom:12px;
}

.filter-group h3{
  font-size:0.9rem;
  margin:0 0 6px;
}

.checkbox-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:4px;
}

label{
  font-size:0.8rem;
}

button{
  width:100%;
  padding:8px;
  font-size:0.9rem;
}

.card-list{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
}

.card{
  background:#fff;
  padding:8px;
  border-radius:8px;
  cursor:pointer;
}

.card-image{
  width:100%;
  aspect-ratio:63/88;
  background:#000;
}

.card-image img{
  width:100%;
  height:100%;
  object-fit:contain;
}

.card-name{
  text-align:center;
  font-size:0.9rem;
  font-weight:bold;
  margin-top:6px;
}

/* モーダル */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  justify-content:center;
  align-items:center;
}
.modal-content{
  background:#fff;
  padding:12px;
  max-width:90%;
  border-radius:8px;
}
.modal-content img{ width:100%; }
.close{
  text-align:right;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>TCG カードDB（非公式）</h1>

<div class="disclaimer">
本サイトは非公式のファンサイトです。<br>
Disney Lorcana に関する権利は各権利者に帰属します。
</div>

<div class="search-box">

  <!-- カラー -->
  <div class="filter-group">
    <h3>カラー</h3>
    <div class="checkbox-grid">
      <label><input type="checkbox" class="color" value="アメジスト"> アメジスト</label>
      <label><input type="checkbox" class="color" value="アンバー"> アンバー</label>
      <label><input type="checkbox" class="color" value="エメラルド"> エメラルド</label>
      <label><input type="checkbox" class="color" value="サファイア"> サファイア</label>
      <label><input type="checkbox" class="color" value="スティール"> スティール</label>
      <label><input type="checkbox" class="color" value="ルビー"> ルビー</label>
    </div>
  </div>

  <!-- レアリティ -->
  <div class="filter-group">
    <h3>レアリティ</h3>
    <div class="checkbox-grid">
      <label><input type="checkbox" class="rarity" value="コモン"> コモン</label>
      <label><input type="checkbox" class="rarity" value="アンコモン"> アンコモン</label>
      <label><input type="checkbox" class="rarity" value="レア"> レア</label>
      <label><input type="checkbox" class="rarity" value="スーパーレア"> スーパーレア</label>
      <label><input type="checkbox" class="rarity" value="レジェンダリー"> レジェンダリー</label>
      <label><input type="checkbox" class="rarity" value="エピック"> エピック</label>
      <label><input type="checkbox" class="rarity" value="エンチャンテッド"> エンチャンテッド</label>
      <label><input type="checkbox" class="rarity" value="アイコニック"> アイコニック</label>
      <label><input type="checkbox" class="rarity" value="その他"> その他</label>
    </div>
  </div>

  <!-- コスト -->
  <div class="filter-group">
    <h3>コスト</h3>
    <div class="checkbox-grid" id="costGroup"></div>
  </div>

  <!-- 収録弾 -->
  <div class="filter-group">
    <h3>収録弾</h3>
    <div class="checkbox-grid" id="setGroup"></div>
  </div>

  <button onclick="search()">検索</button>
</div>

<div class="card-list" id="list"></div>

<!-- モーダル -->
<div class="modal" id="modal" onclick="closeModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="close" onclick="closeModal()">×</div>
    <img id="modalImg">
    <p id="modalText"></p>
  </div>
</div>

<script>
const cards = [
  {
    name:"LADY Family Dog",
    image:"lady_familydog.webp",
    cost:3,
    color:"アンバー",
    rarity:"レア",
    set:8,
    text:"このキャラクターをプレイしたとき、コスト2以下のキャラクターを1体コストを支払わずにプレイしてもよい。"
  }
];

// チェックボックス生成
function createCheckboxes(id, cls, from, to){
  const el = document.getElementById(id);
  for(let i=from;i<=to;i++){
    const label = document.createElement("label");
    label.innerHTML = `<input type="checkbox" class="${cls}" value="${i}"> ${i}`;
    el.appendChild(label);
  }
}
createCheckboxes("costGroup","cost",1,12);
createCheckboxes("setGroup","set",1,11);

function getCheckedValues(cls){
  return [...document.querySelectorAll(`.${cls}:checked`)]
          .map(el => el.value);
}

function search(){
  const colors = getCheckedValues("color");
  const rarities = getCheckedValues("rarity");
  const costs = getCheckedValues("cost").map(Number);
  const sets = getCheckedValues("set").map(Number);

  const result = cards.filter(c => {
    if (colors.length && !colors.includes(c.color)) return false;
    if (rarities.length && !rarities.includes(c.rarity)) return false;
    if (costs.length && !costs.includes(c.cost)) return false;
    if (sets.length && !sets.includes(c.set)) return false;
    return true;
  });

  render(result);
}

function render(list){
  const el = document.getElementById("list");
  el.innerHTML = "";

  if(list.length === 0){
    el.innerHTML = "<p>該当するカードがありません</p>";
    return;
  }

  list.forEach(c => {
    const d = document.createElement("div");
    d.className = "card";
    d.innerHTML = `
      <div class="card-image"><img src="${c.image}"></div>
      <div class="card-name">${c.name}</div>
    `;
    d.onclick = () => openModal(c);
    el.appendChild(d);
  });
}

const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");
const modalText = document.getElementById("modalText");

function openModal(c){
  modal.style.display = "flex";
  modalImg.src = c.image;
  modalText.textContent = c.text;
}
function closeModal(){
  modal.style.display = "none";
}

render(cards);
</script>

</body>
</html>
