<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quest For</title>

  <style>
    /* ===== 基本設定 ===== */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #f5f1e8; /* 薄いベージュ */
      color: #1b2a4a; /* ネイビー */
    }

    header {
      text-align: center;
      padding: 20px 10px;
    }

    h1 {
      margin-bottom: 8px;
    }

    .description {
      font-size: 14px;
      color: #2f3f66;
      max-width: 900px;
      margin: 0 auto;
    }

    /* ===== 検索UI ===== */
    .search-area {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      max-width: 1100px;
      margin: 20px auto;
      padding: 0 10px;
    }

    select {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #1b2a4a;
      background: #ffffff;
      color: #1b2a4a;
    }

    /* ===== カード一覧 ===== */
    .card-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 16px;
      padding: 20px;
      max-width: 1100px;
      margin: 0 auto;
    }

    .card {
      cursor: pointer;
      text-align: center;
    }

    .card img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    /* ===== モーダル（拡大表示） ===== */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      position: relative;
      background: #f5f1e8;
      border-radius: 10px;
      padding: 12px;
      max-width: 90vw;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .modal img {
      max-width: 70vw;
      max-height: 60vh;
      object-fit: contain;
    }

    .modal-text {
      margin-top: 10px;
      font-size: 14px;
      text-align: center;
      line-height: 1.5;
    }

    .close-btn {
      position: absolute;
      top: -10px;
      right: -10px;
      background: #1b2a4a;
      color: #fff;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }

    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 40px;
      color: #1b2a4a;
      cursor: pointer;
      user-select: none;
    }

    .nav-left { left: -40px; }
    .nav-right { right: -40px; }

    @media (max-width: 600px) {
      .nav-left { left: 5px; }
      .nav-right { right: 5px; }
      .modal img {
        max-width: 85vw;
        max-height: 55vh;
      }
    }
  </style>
</head>

<body>

<header>
  <h1>Quest For</h1>
  <p class="description">
    本サイトはディズニーロルカナの非公式ファンサイトです。
    本サイトに関する全ての権利は各権利者に帰属します。
    本サイトは各権利者のあらゆる権利を侵害する意図はありません。
  </p>
</header>

<!-- ===== 検索UI ===== -->
<div class="search-area">
  <select multiple id="ink">
    <option value="アンバー">アンバー</option>
    <option value="アメジスト">アメジスト</option>
    <option value="エメラルド">エメラルド</option>
    <option value="サファイア">サファイア</option>
    <option value="スティール">スティール</option>
    <option value="ルビー">ルビー</option>
  </select>

  <select multiple id="cost">
    <option value="1">1</option><option value="2">2</option><option value="3">3</option>
    <option value="4">4</option><option value="5">5</option><option value="6">6</option>
    <option value="7">7</option><option value="8">8</option><option value="9">9</option>
    <option value="10">10</option><option value="11">11</option><option value="12">12</option>
  </select>

  <select multiple id="rarity">
    <option value="コモン">コモン</option>
    <option value="アンコモン">アンコモン</option>
    <option value="レア">レア</option>
    <option value="スーパーレア">スーパーレア</option>
    <option value="レジェンダリー">レジェンダリー</option>
    <option value="エピック">エピック</option>
    <option value="エンチャンテッド">エンチャンテッド</option>
    <option value="アイコニック">アイコニック</option>
    <option value="その他">その他</option>
  </select>

  <select multiple id="set">
    <option value="1">1弾</option><option value="2">2弾</option><option value="3">3弾</option>
    <option value="4">4弾</option><option value="5">5弾</option><option value="6">6弾</option>
    <option value="7">7弾</option><option value="8">8弾</option><option value="9">9弾</option>
    <option value="10">10弾</option><option value="11">11弾</option>
    <option value="12">12弾</option><option value="13">13弾</option>
    <option value="14">14弾</option><option value="15">15弾</option>
  </select>

  <!-- 並び替え -->
  <select id="sort">
    <option value="asc">コスト昇順</option>
    <option value="desc">コスト降順</option>
  </select>
</div>

<!-- ===== カード一覧 ===== -->
<div class="card-list" id="cardList"></div>

<!-- ===== モーダル ===== -->
<div class="modal" id="modal">
  <div class="modal-content">
    <span class="nav-btn nav-left" onclick="moveCard(-1)">＜</span>
    <span class="nav-btn nav-right" onclick="moveCard(1)">＞</span>
    <button class="close-btn" onclick="closeModal()">×</button>
    <img id="modalImg">
    <div class="modal-text" id="modalText"></div>
  </div>
</div>

<script>
  /* =================================================
     ★★★ カードデータ（ここだけ触ればOK）★★★
     ================================================= */
  const cards = [
    {
      image: "lady_familydog.webp",
      ink: "アンバー",
      cost: 3,
      rarity: "レア",
      set: "8",
      text: "このキャラクターをプレイした時、コスト2以下のキャラクター1体をコストを支払わずにプレイしてよい。"
    }
  ];

  let filteredCards = [];
  let currentIndex = 0;

  function getSelectedValues(id) {
    return Array.from(document.getElementById(id).selectedOptions).map(o => o.value);
  }

  function filterCards() {
    const ink = getSelectedValues("ink");
    const cost = getSelectedValues("cost");
    const rarity = getSelectedValues("rarity");
    const set = getSelectedValues("set");
    const sort = document.getElementById("sort").value;

    filteredCards = cards.filter(c =>
      (ink.length === 0 || ink.includes(c.ink)) &&
      (cost.length === 0 || cost.includes(String(c.cost))) &&
      (rarity.length === 0 || rarity.includes(c.rarity)) &&
      (set.length === 0 || set.includes(c.set))
    );

    filteredCards.sort((a, b) =>
      sort === "asc" ? a.cost - b.cost : b.cost - a.cost
    );

    renderCards();
  }

  function renderCards() {
    const list = document.getElementById("cardList");
    list.innerHTML = "";
    filteredCards.forEach((c, i) => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `<img src="${c.image}">`;
      div.onclick = () => openModal(i);
      list.appendChild(div);
    });
  }

  function openModal(index) {
    currentIndex = index;
    const card = filteredCards[index];
    document.getElementById("modalImg").src = card.image;
    document.getElementById("modalText").textContent = card.text;
    document.getElementById("modal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("modal").style.display = "none";
  }

  function moveCard(step) {
    currentIndex = (currentIndex + step + filteredCards.length) % filteredCards.length;
    openModal(currentIndex);
  }

  document.querySelectorAll("select").forEach(s =>
    s.addEventListener("change", filterCards)
  );

  filteredCards = cards;
  filterCards();
</script>

</body>
</html>
